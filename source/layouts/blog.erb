<!doctype html>
<html lang="en" class="dark">
  <head>
    <meta charset="utf-8">
    <!--
            _
     __   _(_)_ __   ___
     \ \ / / | '_ \ / __|
      \ V /| | | | | (__ 
       \_/ |_|_| |_|\___|

    -->
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">

    <title><%= [current_page.data.title, "Vinc"].compact.uniq.join(" - ") %></title>

    <%= stylesheet_link_tag :syntax %>
    <%= stylesheet_link_tag :site %>
    <%= feed_tag :atom, "#{blog.options.prefix.to_s}/feed.xml", title: "Atom Feed" %>
  </head>
  <body class="<%= page_classes %>">
    <div class="container">
      <% unless page_classes == "index" %>
        <nav aria-label="breadcrumb" role="navigation">
          <%= breadcrumbs(current_page) %>
          (<%= current_article.date.strftime("%Y-%m-%d") %>)
        </nav>
      <% end %>

      <article>
        <%= yield %>

        <p>Tags: <%= current_article.tags.map { |tag| link_to tag, tag_path(tag) }.join(", ") %></p>
      </article>

      <aside>
        <h2>Recent Articles</h2>
        <ul>
          <% blog.articles[0...10].each do |article| %>
            <li><%= link_to article.title, article %> (<%= article.date.strftime("%Y-%m-%d") %>)</li>
          <% end %>
        </ul>
      </aside>
    </div>

    <footer>
      Made with &hearts; in 2012-2017 |
      Switch to <button id="switch-theme" type="button" class="btn">light</button> theme
    </footer>

    <script>
      var theme = localStorage.getItem("theme") || "dark";
      if (theme === "light") {
        document.getElementById("switch-theme").innerHTML = "dark";
        document.documentElement.classList.remove("dark"); 
        document.documentElement.classList.add("light"); 
      }
      document.getElementById("switch-theme").addEventListener("click", function() {
        document.getElementById("switch-theme").innerHTML = theme;
        document.documentElement.classList.remove(theme); 
        theme = theme === "dark" ? "light" : "dark";
        document.documentElement.classList.add(theme); 
        localStorage.setItem("theme", theme);
      });
    </script>
  </body>
</html>
